(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c29241c8","chunk-7cad1abd","chunk-e704d8c8","chunk-662abd24","chunk-cf318440","chunk-2d0c8dba"],{"1c57":function(e,t,a){},"2a34":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Poptip",{attrs:{trigger:"click",placement:"right",title:"选择部门",width:"250"}},[a("div",{staticStyle:{display:"flex"}},[a("Input",{staticStyle:{"margin-right":"10px"},style:{width:e.width},attrs:{readonly:"",placeholder:e.placeholder},model:{value:e.departmentTitle,callback:function(t){e.departmentTitle=t},expression:"departmentTitle"}}),e._v(" "),a("Button",{attrs:{icon:"md-trash"},on:{click:e.clearSelect}},[e._v("清空已选")])],1),e._v(" "),a("div",{staticClass:"tree-bar",attrs:{slot:"content"},slot:"content"},[a("Input",{attrs:{suffix:"ios-search",placeholder:"输入部门名搜索",clearable:""},on:{"on-change":e.searchDep},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),e._v(" "),a("Tree",{attrs:{data:e.dataDep,"load-data":e.loadData,multiple:e.multiple},on:{"on-select-change":e.selectTree}}),e._v(" "),e.depLoading?a("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)])],1)},r=[],o=(a("ac6a"),a("365c")),i={name:"departmentTreeChoose",props:{multiple:{type:Boolean,default:!1},width:{type:String,default:"200px"},placeholder:{type:String,default:"点击选择部门"}},data:function(){return{depLoading:!1,departmentTitle:"",searchKey:"",dataDep:[],selectDep:[],department:[]}},methods:{initDepartmentData:function(){var e=this;Object(o["Q"])().then((function(t){!0===t.success&&(t.result.forEach((function(e){e.isParent&&(e.loading=!1,e.children=[]),-1===e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)})),e.dataDep=t.result)}))},loadData:function(e,t){Object(o["R"])(e.id).then((function(e){!0===e.success&&(e.result.forEach((function(e){e.isParent&&(e.loading=!1,e.children=[]),-1===e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)})),t(e.result))}))},searchDep:function(){var e=this;this.searchKey?(this.depLoading=!0,Object(o["W"])({title:this.searchKey}).then((function(t){e.depLoading=!1,t.success&&(t.result.forEach((function(e){-1===e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)})),e.dataDep=t.result)}))):this.initDepartmentData()},selectTree:function(e){var t=[],a="";e.forEach((function(e){t.push(e.id),a=""==a?e.title:a+"、"+e.title})),this.departmentId=t,this.departmentTitle=a,this.$emit("on-change",this.departmentId)},clearSelect:function(){this.departmentId=[],this.departmentTitle="",this.initDepartmentData(),this.$emit("on-change",this.departmentId)},setSelectDep:function(e,t){this.departmentId=e,this.departmentTitle=t,this.$emit("on-change",this.departmentId)}},created:function(){this.initDepartmentData()}},n=i,l=(a("54bb"),a("2877")),c=Object(l["a"])(n,s,r,!1,null,null,null);t["default"]=c.exports},"36f8":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Poptip",{attrs:{trigger:"hover",title:"图片预览",placement:"right",width:"350"}},[a("Input",{style:{width:e.width},attrs:{placeholder:"可直接填入网络图片链接",clearable:""},on:{"on-change":e.handleChange},model:{value:e.picUrl,callback:function(t){e.picUrl=t},expression:"picUrl"}}),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("img",{staticStyle:{width:"100%",margin:"0 auto",display:"block"},attrs:{src:e.picUrl,alt:"无效的图片链接"}}),e._v(" "),a("a",{staticStyle:{"margin-top":"5px","text-align":"right",display:"block"},on:{click:function(t){e.viewImage=!0}}},[e._v("查看大图")])])],1),e._v(" "),a("Upload",{ref:"up",staticClass:"upload",attrs:{action:e.uploadFileUrl,headers:e.accessToken,"on-success":e.handleSuccess,"on-error":e.handleError,format:["jpg","jpeg","png","gif","bmp"],accept:".jpg, .jpeg, .png, .gif, .bmp","max-size":5120,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.beforeUpload,"show-upload-list":!1}},[a("Button",{attrs:{loading:e.loading,icon:"ios-cloud-upload-outline"}},[e._v("上传图片")])],1),e._v(" "),a("Modal",{attrs:{title:"图片预览",styles:{top:"30px"},draggable:""},model:{value:e.viewImage,callback:function(t){e.viewImage=t},expression:"viewImage"}},[a("img",{staticStyle:{width:"100%",margin:"0 auto",display:"block"},attrs:{src:e.picUrl,alt:"无效的图片链接"}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){e.viewImage=!1}}},[e._v("关闭")])],1)])],1)},r=[],o=(a("6b54"),a("7f7f"),a("365c")),i={name:"uploadPicInput",props:{width:{type:String,default:"200px"}},data:function(){return{accessToken:{},picUrl:"",loading:!1,viewImage:!1,uploadFileUrl:o["bb"]}},methods:{init:function(){this.accessToken={accessToken:this.getStore("accessToken")}},handleFormatError:function(e){this.loading=!1,this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+e.name+" ’格式不正确, 请选择 .jpg .jpeg .png .gif .bmp格式文件"})},handleMaxSize:function(e){this.loading=!1,this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+e.name+" ’大小过大, 不得超过 5M."})},beforeUpload:function(){return this.loading=!0,!0},handleSuccess:function(e,t){this.loading=!1,!0===e.success?(t.url=e.result,this.picUrl=e.result,this.$emit("on-change",this.picUrl)):this.$Message.error(e.message)},handleError:function(e,t,a){this.loading=!1,this.$Message.error(e.toString())},handleChange:function(e){this.$emit("on-change",this.picUrl)},setPicUrl:function(e){this.picUrl=e,this.$emit("on-change",this.picUrl)}},created:function(){this.init()}},n=i,l=(a("3ca0"),a("2877")),c=Object(l["a"])(n,s,r,!1,null,null,null);t["default"]=c.exports},"3ca0":function(e,t,a){"use strict";var s=a("8a79"),r=a.n(s);r.a},4320:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("Row",[a("Col",[a("Card",[a("Row",[a("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,inline:"","label-width":70}},[a("Form-item",{attrs:{label:"用户名称",prop:"username"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入用户名"},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1),e._v(" "),a("Form-item",{attrs:{label:"部门",prop:"department"}},[a("department-choose",{ref:"dep",on:{"on-select":e.handleSelectDep}})],1),e._v(" "),e.drop?a("span",[a("Form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入手机号"},model:{value:e.searchForm.mobile,callback:function(t){e.$set(e.searchForm,"mobile",t)},expression:"searchForm.mobile"}})],1),e._v(" "),a("Form-item",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入邮箱"},model:{value:e.searchForm.email,callback:function(t){e.$set(e.searchForm,"email",t)},expression:"searchForm.email"}})],1),e._v(" "),a("Form-item",{attrs:{label:"性别",prop:"sex"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.searchForm.sex,callback:function(t){e.$set(e.searchForm,"sex",t)},expression:"searchForm.sex"}},e._l(e.dictSex,(function(t,s){return a("Option",{key:s,attrs:{value:t.value}},[e._v(e._s(t.title))])})),1)],1),e._v(" "),a("Form-item",{attrs:{label:"用户类型",prop:"type"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("Option",{attrs:{value:"0"}},[e._v("普通用户")]),e._v(" "),a("Option",{attrs:{value:"1"}},[e._v("管理员")])],1)],1),e._v(" "),a("Form-item",{attrs:{label:"用户状态",prop:"status"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("Option",{attrs:{value:"0"}},[e._v("正常")]),e._v(" "),a("Option",{attrs:{value:"-1"}},[e._v("禁用")])],1)],1),e._v(" "),a("Form-item",{attrs:{label:"创建时间"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",format:"yyyy-MM-dd",clearable:"",placeholder:"选择起始时间"},on:{"on-change":e.selectDateRange},model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}})],1)],1):e._e(),e._v(" "),a("Form-item",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearch}},[e._v("搜索")]),e._v(" "),a("Button",{on:{click:e.handleReset}},[e._v("重置")]),e._v(" "),a("a",{staticClass:"drop-down",on:{click:e.dropDown}},[e._v("\n                "+e._s(e.dropDownContent)+"\n                "),a("Icon",{attrs:{type:e.dropDownIcon}})],1)],1)],1)],1),e._v(" "),a("Row",{staticClass:"operation"},[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v("添加用户")]),e._v(" "),a("Button",{attrs:{icon:"md-trash"},on:{click:e.delAll}},[e._v("批量删除")]),e._v(" "),a("Dropdown",{on:{"on-click":e.handleDropdown}},[a("Button",[e._v("更多操作\n              "),a("Icon",{attrs:{type:"md-arrow-dropdown"}})],1),e._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"refresh"}},[e._v("刷新")]),e._v(" "),a("DropdownItem",{attrs:{name:"exportData"}},[e._v("导出所选数据")]),e._v(" "),a("DropdownItem",{attrs:{name:"exportAll"}},[e._v("导出全部数据")]),e._v(" "),a("DropdownItem",{attrs:{name:"importData"}},[e._v("导入数据(付费)")])],1)],1),e._v(" "),e.operationLoading?a("circleLoading"):e._e()],1),e._v(" "),a("Row",[a("Alert",{attrs:{"show-icon":""}},[e._v("\n            已选择\n            "),a("span",{staticClass:"select-count"},[e._v(e._s(e.selectCount))]),e._v(" 项\n            "),a("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v("清空")])])],1),e._v(" "),a("Row",[a("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,sortable:"custom"},on:{"on-sort-change":e.changeSort,"on-selection-change":e.showSelect}}),e._v(" "),a("Table",{ref:"exportTable",staticStyle:{display:"none"},attrs:{columns:e.exportColumns,data:e.exportData}})],1),e._v(" "),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)],1)],1),e._v(" "),a("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,width:500,styles:{top:"30px"}},model:{value:e.userModalVisible,callback:function(t){e.userModalVisible=t},expression:"userModalVisible"}},[a("Form",{ref:"userForm",attrs:{model:e.userForm,"label-width":70,rules:e.userFormValidate}},[a("FormItem",{attrs:{label:"用户名",prop:"username"}},[a("Input",{attrs:{autocomplete:"off"},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),e._v(" "),0===e.modalType?a("FormItem",{attrs:{label:"密码",prop:"password",error:e.errorPass}},[a("Input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1):e._e(),e._v(" "),a("FormItem",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),e._v(" "),a("FormItem",{attrs:{label:"手机号",prop:"mobile"}},[a("Input",{model:{value:e.userForm.mobile,callback:function(t){e.$set(e.userForm,"mobile",t)},expression:"userForm.mobile"}})],1),e._v(" "),a("FormItem",{attrs:{label:"性别",prop:"sex"}},[a("RadioGroup",{model:{value:e.userForm.sex,callback:function(t){e.$set(e.userForm,"sex",t)},expression:"userForm.sex"}},e._l(e.dictSex,(function(t,s){return a("Radio",{key:s,attrs:{label:Number(t.value)}},[e._v(e._s(t.title))])})),1)],1),e._v(" "),a("Form-item",{attrs:{label:"头像",prop:"avatar"}},[a("upload-pic-input",{ref:"upload",attrs:{width:"285px"},on:{"on-change":e.handleUpload}})],1),e._v(" "),a("Form-item",{attrs:{label:"所属部门"}},[a("department-tree-choose",{ref:"depTree",attrs:{width:"285px"},on:{"on-change":e.handleSelectDepTree}})],1),e._v(" "),a("FormItem",{attrs:{label:"用户类型",prop:"type"}},[a("Select",{attrs:{placeholder:"请选择"},model:{value:e.userForm.type,callback:function(t){e.$set(e.userForm,"type",t)},expression:"userForm.type"}},[a("Option",{attrs:{value:0}},[e._v("普通用户")]),e._v(" "),a("Option",{attrs:{value:1}},[e._v("管理员")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"角色分配",prop:"roles"}},[a("Select",{attrs:{multiple:""},model:{value:e.userForm.roles,callback:function(t){e.$set(e.userForm,"roles",t)},expression:"userForm.roles"}},e._l(e.roleList,(function(t){return a("Option",{key:t.id,attrs:{value:t.id,label:t.name}},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(t.description))])])})),1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:e.cancelUser}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.submitUser}},[e._v("提交")])],1)],1),e._v(" "),a("Modal",{attrs:{title:"确认导出",loading:e.loadingExport},on:{"on-ok":e.exportAll},model:{value:e.modalExportAll,callback:function(t){e.modalExportAll=t},expression:"modalExportAll"}},[a("p",[e._v("您确认要导出全部 "+e._s(e.total)+" 条数据？")])])],1)},r=[],o=(a("ac6a"),a("365c")),i=a("5bed"),n=a("5757"),l=a("2a34"),c=a("36f8"),d=a("89ca"),u={name:"user-manage",components:{circleLoading:d["default"],expandRow:i["default"],departmentChoose:n["default"],departmentTreeChoose:l["default"],uploadPicInput:c["default"]},data:function(){var e=this,t=function(e,t,a){var s=/^[1][3,4,5,7,8][0-9]{9}$/;s.test(t)?a():a(new Error("手机号格式错误"))};return{loading:!0,operationLoading:!1,loadingExport:!0,modalExportAll:!1,drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",selectCount:0,selectList:[],dataDep:[],searchKey:"",searchForm:{username:"",departmentId:"",mobile:"",email:"",sex:"",type:"",status:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc",startDate:"",endDate:""},selectDate:null,modalType:0,userModalVisible:!1,modalTitle:"",userForm:{username:"",mobile:"",email:"",sex:1,type:0,avatar:"",roles:[],departmentId:"",departmentTitle:""},userRoles:[],roleList:[],errorPass:"",userFormValidate:{username:[{required:!0,message:"账号不能为空",trigger:"blur"}],mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"},{validator:t,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址"},{type:"email",message:"邮箱格式不正确"}]},submitLoading:!1,columns:[{type:"selection",width:60,align:"center",fixed:"left"},{type:"expand",width:50,fixed:"left",render:function(e,t){return e(i["default"],{props:{row:t.row}})}},{type:"index",width:60,align:"center",fixed:"left"},{title:"用户名",key:"username",minWidth:145,sortable:!0,fixed:"left"},{title:"头像",key:"avatar",width:80,align:"center",render:function(e,t){return e("Avatar",{props:{src:t.row.avatar}})}},{title:"所属部门",key:"departmentTitle",width:120},{title:"手机",key:"mobile",width:115,sortable:!0},{title:"邮箱",key:"email",width:180,sortable:!0},{title:"性别",key:"sex",width:70,align:"center",render:function(t,a){var s="";return e.dictSex.forEach((function(e){e.value==a.row.sex&&(s=e.title)})),t("div",s)}},{title:"用户类型",key:"type",align:"center",width:100,render:function(e,t){var a="";return 1===t.row.type?a="管理员":0===t.row.type&&(a="普通用户"),e("div",a)}},{title:"状态",key:"status",align:"center",width:140,render:function(e,t){return 0===t.row.status?e("div",[e("Tag",{props:{type:"dot",color:"success"}},"正常启用")]):-1===t.row.status?e("div",[e("Tag",{props:{type:"dot",color:"error"}},"禁用")]):void 0},filters:[{label:"正常启用",value:0},{label:"禁用",value:-1}],filterMultiple:!1,filterMethod:function(e,t){return 0===e?0===t.status:-1===e?-1===t.status:void 0}},{title:"创建时间",key:"createTime",sortable:!0,sortType:"desc",width:150},{title:"操作",key:"action",width:200,align:"center",fixed:"right",render:function(t,a){var s="";return s=0==a.row.status?t("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){e.disable(a.row)}}},"禁用"):t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.enable(a.row)}}},"启用"),t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.edit(a.row)}}},"编辑"),s,t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.remove(a.row)}}},"删除")])}}],exportColumns:[{title:"用户名",key:"username"},{title:"头像",key:"avatar"},{title:"所属部门ID",key:"departmentId"},{title:"所属部门",key:"departmentTitle"},{title:"手机",key:"mobile"},{title:"邮箱",key:"email"},{title:"性别",key:"sex"},{title:"用户类型",key:"type"},{title:"状态",key:"status"},{title:"删除标志",key:"delFlag"},{title:"创建时间",key:"createTime"},{title:"更新时间",key:"updateTime"}],data:[],exportData:[],total:0,dictSex:[]}},methods:{init:function(){this.getUserList(),this.getDictSexData()},getDictSexData:function(){var e=this;Object(o["I"])("sex").then((function(t){t.success&&(e.dictSex=t.result)}))},handleSelectDepTree:function(e){this.userForm.departmentId=e[0]},handleSelectDep:function(e){this.searchForm.departmentId=e},changePage:function(e){this.searchForm.pageNumber=e,this.getUserList(),this.clearSelectAll()},changePageSize:function(e){this.searchForm.pageSize=e,this.getUserList()},selectDateRange:function(e){e&&(this.searchForm.startDate=e[0],this.searchForm.endDate=e[1])},getUserList:function(){var e=this;this.loading=!0,this.searchForm.type||(this.searchForm.type=""),this.searchForm.status||(this.searchForm.status=""),Object(o["O"])(this.searchForm).then((function(t){e.loading=!1,!0===t.success&&(e.data=t.result.content,e.total=t.result.totalElements)}))},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getUserList()},handleReset:function(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.selectDate=null,this.searchForm.startDate="",this.searchForm.endDate="",this.selectDep=[],this.searchForm.departmentId="",this.getUserList()},changeSort:function(e){this.searchForm.sort=e.key,this.searchForm.order=e.order,"normal"===e.order&&(this.searchForm.order=""),this.getUserList()},getRoleList:function(){var e=this;Object(o["G"])().then((function(t){!0===t.success&&(e.roleList=t.result)}))},handleDropdown:function(e){var t=this;if("refresh"===e)this.getUserList();else if("exportData"===e){if(this.selectCount<=0)return void this.$Message.warning("您还未选择要导出的数据");this.$Modal.confirm({title:"确认导出",content:"您确认要导出所选 "+this.selectCount+" 条数据?",onOk:function(){t.$refs.exportTable.exportCsv({filename:"用户数据"})}})}else"exportAll"===e?this.modalExportAll=!0:"importData"===e&&this.$Modal.info({title:"提示",content:"抱歉,功能暂不支持"})},exportAll:function(){var e=this;Object(o["H"])().then((function(t){e.modalExportAll=!1,t.success&&(e.exportData=t.result,setTimeout((function(){e.$refs.exportTable.exportCsv({filename:"用户全部数据"})}),1e3))}))},cancelUser:function(){this.userModalVisible=!1},submitUser:function(){var e=this;this.$refs.userForm.validate((function(t){if(t)if(0===e.modalType){if(delete e.userForm.id,delete e.userForm.status,""==e.userForm.password||void 0==e.userForm.password)return void(e.errorPass="密码不能为空");if(e.userForm.password.length<6)return void(e.errorPass="密码长度不得少于6位");e.submitLoading=!0,Object(o["g"])(e.userForm).then((function(t){e.submitLoading=!1,!0===t.success&&(e.$Message.success("操作成功"),e.getUserList(),e.userModalVisible=!1)}))}else e.submitLoading=!0,Object(o["B"])(e.userForm).then((function(t){e.submitLoading=!1,!0===t.success&&(e.$Message.success("操作成功"),e.getUserList(),e.userModalVisible=!1)}))}))},handleUpload:function(e){this.userForm.avatar=e},add:function(){this.modalType=0,this.modalTitle="添加用户",this.$refs.userForm.resetFields(),this.userModalVisible=!0},edit:function(e){for(var t in this.modalType=1,this.modalTitle="编辑用户",this.$refs.userForm.resetFields(),e)null===e[t]&&(e[t]="");var a=JSON.stringify(e),s=JSON.parse(a);this.userForm=s,this.$refs.depTree.setSelectDep([s.departmentId],s.departmentTitle),this.$refs.upload.setPicUrl(s.avatar);var r=[];this.userForm.roles.forEach((function(e){r.push(e.id)})),this.userForm.roles=r,this.userModalVisible=!0},enable:function(e){var t=this;this.$Modal.confirm({title:"确认启用",content:"您确认要启用用户 "+e.username+" ?",onOk:function(){t.operationLoading=!0,Object(o["C"])(e.id).then((function(e){t.operationLoading=!1,!0===e.success&&(t.$Message.success("操作成功"),t.getUserList())}))}})},disable:function(e){var t=this;this.$Modal.confirm({title:"确认禁用",content:"您确认要禁用用户 "+e.username+" ?",onOk:function(){t.operationLoading=!0,Object(o["r"])(e.id).then((function(e){t.operationLoading=!1,!0===e.success&&(t.$Message.success("操作成功"),t.getUserList())}))}})},remove:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除用户 "+e.username+" ?",onOk:function(){t.operationLoading=!0,Object(o["q"])(e.id).then((function(e){t.operationLoading=!1,!0===e.success&&(t.$Message.success("删除成功"),t.getUserList())}))}})},dropDown:function(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},showSelect:function(e){this.exportData=e,this.selectList=e,this.selectCount=e.length},clearSelectAll:function(){this.$refs.table.selectAll(!1)},delAll:function(){var e=this;this.selectCount<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",onOk:function(){var t="";e.selectList.forEach((function(e){t+=e.id+","})),t=t.substring(0,t.length-1),e.operationLoading=!0,Object(o["q"])(t).then((function(t){e.operationLoading=!1,!0===t.success&&(e.$Message.success("删除成功"),e.clearSelectAll(),e.getUserList())}))}})}},mounted:function(){this.init(),this.getRoleList()}},p=u,m=(a("df2b"),a("2877")),h=Object(m["a"])(p,s,r,!1,null,null,null);t["default"]=h.exports},"54bb":function(e,t,a){"use strict";var s=a("1c57"),r=a.n(s);r.a},5757:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Cascader",{style:{width:e.width},attrs:{data:e.department,"load-data":e.loadData,"change-on-select":"",filterable:"",clearable:"",placeholder:"请选择或输入搜索部门"},on:{"on-change":e.handleChangeDep},model:{value:e.selectDep,callback:function(t){e.selectDep=t},expression:"selectDep"}})],1)},r=[],o=(a("ac6a"),a("365c")),i={name:"departmentChoose",props:{width:{type:String,default:"200px"}},data:function(){return{selectDep:[],department:[]}},methods:{initDepartmentData:function(){var e=this;Object(o["Q"])().then((function(t){!0===t.success&&(t.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1===e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),e.department=t.result)}))},loadData:function(e,t){e.loading=!0,Object(o["R"])(e.value).then((function(a){e.loading=!1,!0===a.success&&(a.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1===e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),e.children=a.result,t())}))},handleChangeDep:function(e,t){var a="";e&&e.length>0&&(a=e[e.length-1]),this.$emit("on-select",a)},clearSelect:function(){this.selectDep=[]}},created:function(){this.initDepartmentData()}},n=i,l=a("2877"),c=Object(l["a"])(n,s,r,!1,null,null,null);t["default"]=c.exports},"5bed":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{staticClass:"expand-row"},[a("Col",{attrs:{span:"6"}},[a("span",[e._v("昵称: ")]),e._v(" "),a("span",[e._v(e._s(e.row.nickName))])]),e._v(" "),a("Col",{attrs:{span:"6"}},[a("span",[e._v("个人简介: ")]),e._v(" "),a("span",[e._v(e._s(e.row.description))])]),e._v(" "),a("Col",{attrs:{span:"6"}},[a("span",[e._v("所在省市: ")]),e._v(" "),e.row.address?a("al-cascader",{staticStyle:{width:"230px",display:"inline-block"},attrs:{value:JSON.parse(e.row.address),size:"small",disabled:"","data-type":"code",level:"2"}}):e._e()],1),e._v(" "),a("Col",{attrs:{span:"6"}},[a("span",[e._v("街道地址: ")]),e._v(" "),a("span",[e._v(e._s(e.row.street))])])],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"6"}},[a("span",[e._v("密码强度: ")]),e._v(" "),a("span",[e._v(e._s(e.row.passStrength))])])],1)],1)},r=[],o={name:"expandRow",props:{row:Object}},i=o,n=(a("71c3"),a("2877")),l=Object(n["a"])(i,s,r,!1,null,"77dc0b6e",null);t["default"]=l.exports},"616e":function(e,t,a){},"71c3":function(e,t,a){"use strict";var s=a("616e"),r=a.n(s);r.a},"7ab4":function(e,t,a){},"89ca":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"inline-block"}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"18",color:"#2d8cf0"}})],1)},r=[],o={name:"circleLoading"},i=o,n=(a("c70c"),a("2877")),l=Object(n["a"])(i,s,r,!1,null,null,null);t["default"]=l.exports},"8a79":function(e,t,a){},b726:function(e,t,a){},c70c:function(e,t,a){"use strict";var s=a("b726"),r=a.n(s);r.a},df2b:function(e,t,a){"use strict";var s=a("7ab4"),r=a.n(s);r.a}}]);